@startuml
' ===== ESTILO CLEAN & FLAT =====
skinparam dpi 200
skinparam shadowing false
skinparam roundcorner 15
skinparam classBackgroundColor #FFFFFF
skinparam classBorderColor #2E3A59
skinparam classFontColor #1E293B
skinparam classFontSize 16
skinparam arrowColor #475569
skinparam arrowThickness 1.5
skinparam arrowFontSize 13
' Ortho: Lineas rectas tipo tubería
skinparam linetype ortho

' Espaciado generoso para evitar choques
skinparam nodesep 80
skinparam ranksep 100

' NOTA: Quitamos "left to right direction" para tener control total
' de qué va arriba y qué va abajo, pero construimos el flujo horizontalmente.

' ===== CLASES =====
class Usuario {
    + id
    + nombre
    + emailInstitucional
    + esAdmin
}

class Comentario {
    + texto
    + fecha
}

class Apunte {
    + titulo
    + descripcion
    + fechaSubida
    + estado
}

class Valoracion {
    + puntaje
    + fecha
}

class Administrador {
}

class DecisionModeracion {
    + decision
    + motivo
    + fecha
}

' ===== ESTRUCTURA DEL LAYOUT (La Magia) =====
' 1. Columna Izquierda: Comentario Arriba, Usuario Abajo
Comentario -[hidden]down-> Usuario

' 2. Usuario conecta horizontalmente con Administrador (para herencia limpia)
Usuario -[hidden]right-> Administrador

' 3. El contenido principal (Apunte) al centro
Comentario -[hidden]right-> Apunte

' 4. Valoración arriba de Apunte
Apunte -[hidden]up-> Valoracion

' 5. Decision a la derecha de todo
Apunte -[hidden]right-> DecisionModeracion


' ===== RELACIONES =====

' -- Zona Izquierda (Ciclo Comentario-Usuario) --
' La flecha baja directo de Comentario a Usuario
Comentario "0..*" -down-> "1" Usuario : escrito por

' -- Zona Central (Apunte) --
' Usuario crea apunte (hacia la derecha)
Usuario "1" -right-> "0..*" Apunte : crea

' Apunte contiene comentario (hacia la izquierda, vuelta corta)
Apunte "1" -left-> "0..*" Comentario : contiene

' -- Zona Arriba (Valoración) --
' Valoracion cae sobre apunte
Valoracion "0..*" -down-> "1" Apunte : recibe
' Valoracion conecta con usuario (diagonal lejana o por arriba)
Valoracion "0..*" -left-> "1" Usuario : emitida por

' -- Zona Abajo/Derecha (Moderación) --
' Herencia (Admin debajo o al lado de Usuario)
Usuario <|-right- Administrador

' Admin aplica decision
Administrador "1" -right-> "0..*" DecisionModeracion : aplica

' Decision modifica cosas (Flechas suben)
DecisionModeracion -up-> Apunte : modifica
DecisionModeracion -up-> Comentario : modifica

@enduml